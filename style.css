/* 
    Gradio 網頁 CSS
    設計者：Gimmy
    修改日期：2023/05/07
*/

/* -------------------- Variable 自訂變數 -------------------- */
:root,
.dark {
    font-size: 10px !important;

    --primary-50: hsl(212, 42%, 80%);
    --primary-100: hsl(212, 42%, 83%);
    --primary-200: hsl(212, 42%, 66%);
    --primary-300: hsl(212, 42%, 59%);
    --primary-400: hsl(212, 42%, 52%);
    --primary-500: hsl(212, 42%, 45%);
    --primary-600: hsl(212, 42%, 38%);
    --primary-700: hsl(212, 42%, 31%);
    --primary-800: hsl(212, 42%, 24%);
    --primary-900: hsl(212, 42%, 17%);
    --primary-950: hsl(212, 42%, 10%);

    --secondary-50: hsl(206, 16%, 80%);
    --secondary-100: hsl(206, 16%, 83%);
    --secondary-200: hsl(206, 16%, 66%);
    --secondary-300: hsl(206, 16%, 59%);
    --secondary-400: hsl(206, 16%, 52%);
    --secondary-500: hsl(206, 16%, 45%);
    --secondary-600: hsl(206, 16%, 38%);
    --secondary-700: hsl(206, 16%, 31%);
    --secondary-800: hsl(206, 16%, 24%);
    --secondary-900: hsl(206, 16%, 17%);
    --secondary-950: hsl(206, 16%, 10%);

    --neutral-50: hsl(200, 6%, 80%);
    --neutral-100: hsl(200, 6%, 83%);
    --neutral-200: hsl(200, 6%, 66%);
    --neutral-300: hsl(200, 6%, 59%);
    --neutral-400: hsl(200, 6%, 52%);
    --neutral-500: hsl(200, 6%, 45%);
    --neutral-600: hsl(200, 6%, 38%);
    --neutral-700: hsl(200, 6%, 31%);
    --neutral-800: hsl(200, 6%, 24%);
    --neutral-900: hsl(200, 6%, 17%);
    --neutral-950: hsl(200, 6%, 10%);

    --radius-xxs: 0.1rem;
    --radius-xs: 0.2rem;
    --radius-sm: 0.4rem;
    --radius-md: 0.6rem;
    --radius-lg: 0.8rem;
    --radius-xl: 1.2rem;
    --radius-xxl: 2.2rem;

    --spacing-xxs: 0.1rem;
    --spacing-xs: 0.2rem;
    --spacing-sm: 0.4rem;
    --spacing-md: 0.6rem;
    --spacing-lg: 0.8rem;
    --spacing-xl: 1.0rem;
    --spacing-xxl: 1.6rem;

    --text-xxs: 0.9rem;
    --text-xs: 1.0rem;
    --text-sm: 1.2rem;
    --text-md: 1.4rem;
    --text-lg: 1.6rem;
    --text-xl: 2.2rem;
    --text-xxl: 2.6rem;

    --font: 'Dream', 'SF Pro Display', 'Segoe UI', 'ui-sans-serif', 'system-ui', sans-serif;
    --font-sans: 'Dream', 'SF Pro Display', 'Segoe UI', 'ui-sans-serif', 'system-ui', sans-serif;
    --font-serif: 'Dream', 'SF Pro Display', 'Segoe UI', 'ui-sans-serif', 'system-ui', sans-serif;
    --font-mono: 'Dream Mono', 'Menlo', 'Consolas', 'ui-monospace', monospace;

    --margin-sm: 0;

    --padding-sm: 0;
    --padding-md: var(--spacing-md);
    --padding-lg: var(--spacing-lg);
    --padding-xl: var(--spacing-xl);

    --text-weight-lt: 200;
    --text-weight-rg: 400;
    --text-weight-md: 500;
    --text-weight-bd: 700;

    --object-fit: cover;

    --color-text-primary: var(--neutral-300);
    --color-text-secondary: var(--neutral-700);
    --color-accent: var(--primary-500);
    --color-accent-soft: var(--secondary-500);

    --background-fill-transparent: transparent;
    --background-fill-primary: var(--secondary-950);
    --background-fill-secondary: var(--secondary-950);
    --background-fill-accent: var(--secondary-950);
    --background-fill-accent-soft: var(--secondary-900);
    --background-gradient-primary: linear-gradient(to bottom right, var(--primary-600), var(--primary-700));
    --background-gradient-primary-hover: linear-gradient(to bottom right, var(--primary-600), var(--primary-600));
    --background-gradient-secondary: linear-gradient(to bottom right, var(--secondary-700), var(--secondary-800));
    --background-gradient-secondary-hover: linear-gradient(to bottom right, var(--secondary-700), var(--secondary-700));
    --stat-background-fill: linear-gradient(to right, var(--primary-400), var(--primary-600));

    --border-width-sm: 0;
    --border-width-md: 1px;
    --border-width-lg: 2px;
    --border-style-primary: solid;
    --border-style-secondary: dashed;
    --border-color-primary: var(--secondary-800);
    --border-color-secondary: var(--secondary-600);
    --border-color-accent: var(--secondary-500);
    --embed-radius: var(--radius-md);
    --container-radius: var(--embed-radius);

    --shadow-none: 0 0 0 0 hsla(0, 0%, 0%, 0.1);
    --shadow-drop: 0 0.1rem 0.2rem 0.1rem hsla(0, 0%, 0%, 0.1);
    --shadow-drop-lg: 0 0.1rem 0.2rem 0.1rem hsla(0, 0%, 0%, 0.1), 0 0.1rem 0.2rem -0.1rem hsla(0, 0%, 0%, 0.1);
    --shadow-inset: 0 0.2rem 0.4rem 0.1rem hsla(0, 0%, 0%, 0.1) inset;
    --shadow-spread: var(--spacing-xxs);

    --layout-gap: var(--spacing-md);

    /* -------------------- Body 基本樣式 -------------------- */
    --body-text-weight: var(--text-weight-rg);
    --body-text-size: var(--text-sm);
    --body-text-color: var(--color-text-primary);
    --body-text-color-subdued: var(--color-text-secondary);
    --body-background-fill: var(--background-fill-primary);

    --link-text-color: var(--color-accent-soft);
    --link-text-color-hover: var(--color-accent);
    --link-text-color-active: var(--color-accent-soft);
    --link-text-color-visited: var(--color-accent-soft);

    --prose-text-size: var(--text-sm);
    --prose-text-weight: var(--text-weight-md);
    --prose-header-text-weight: var(--text-weight-bd);

    /* -------------------- Section 標籤頁樣式 -------------------- */
    --section-header-text-size: var(--text-lg);
    --section-header-text-weight: var(--text-weight-rg);

    /* -------------------- Panel 面板樣式 -------------------- */
    --panel-background-fill: var(--background-fill-secondary);
    --panel-border-width: var(--border-width-sm);
    --panel-border-color: var(--border-color-primary);

    /* -------------------- Block 區塊樣式 -------------------- */
    --block-padding: var(--padding-lg);
    --block-background-fill: var(--background-fill-accent);
    --block-border-width: var(--border-width-md);
    --block-border-style: var(--border-style-primary);
    --block-border-color: var(--border-color-primary);
    --block-radius: var(--embed-radius);
    --block-shadow: var(--shadow-drop);

    /* -------------------- Block 標題樣式 -------------------- */
    --block-title-padding: var(--padding-sm);
    --block-title-text-weight: var(--text-weight-bd);
    --block-title-text-size: var(--text-sm);
    --block-title-text-color: var(--color-text-secondary);
    --block-title-background-fill: var(--background-fill-transparent);
    --block-title-border-width: var(--border-width-sm);
    --block-title-border-color: var(--border-color-primary);
    --block-title-radius: var(--embed-radius);

    /* -------------------- Block 左上標籤或中間樣式 -------------------- */
    --block-label-margin: var(--margin-sm);
    --block-label-padding: var(--padding-md);
    --block-label-text-weight: var(--text-weight-rg);
    --block-label-text-size: var(--text-sm);
    --block-label-text-color: var(--color-text-secondary);
    --block-label-background-fill: var(--background-fill-secondary);
    --block-label-border-width: var(--border-width-md);
    --block-label-border-color: var(--border-color-primary);
    --block-label-radius: var(--embed-radius) 0 var(--embed-radius) 0;
    --block-label-right-radius: 0 var(--embed-radius) 0 var(--embed-radius);

    /* -------------------- Button 按鈕樣式 -------------------- */
    --button-border-width: var(--border-width-md);
    --button-border-color: var(--border-color-secondary);
    --button-border-color-hover: var(--border-color-accent);

    --button-large-padding: var(--padding-md);
    --button-large-text-weight: var(--text-weight-md);
    --button-large-text-size: var(--text-lg);
    --button-large-radius: var(--embed-radius);

    --button-small-padding: var(--padding-md);
    --button-small-text-weight: var(--text-weight-rg);
    --button-small-text-size: var(--text-md);
    --button-small-radius: var(--embed-radius);

    --button-primary-text-color: var(--color-text-primary);
    --button-primary-text-color-hover: var(--color-text-primary);
    --button-primary-background-fill: var(--background-gradient-primary);
    --button-primary-background-fill-hover: var(--background-gradient-primary-hover);
    --button-primary-border-color: var(--button-border-color);
    --button-primary-border-color-hover: var(--button-border-color-hover);

    --button-secondary-text-color: var(--color-text-primary);
    --button-secondary-text-color-hover: var(--color-text-primary);
    --button-secondary-background-fill: var(--background-gradient-secondary);
    --button-secondary-background-fill-hover: var(--background-gradient-secondary-hover);
    --button-secondary-border-color: var(--button-border-color);
    --button-secondary-border-color-hover: var(--button-border-color-hover);

    --button-cancel-text-color: var(--color-text-primary);
    --button-cancel-text-color-hover: var(--color-text-primary);
    --button-cancel-background-fill: var(--background-gradient-secondary);
    --button-cancel-background-fill-hover: var(--background-gradient-secondary-hover);
    --button-cancel-border-color: var(--button-border-color);
    --button-cancel-border-color-hover: var(--button-border-color-hover);

    --button-shadow: var(--shadow-drop);
    --button-shadow-active: var(--shadow-inset);
    --button-shadow-hover: var(--shadow-drop-lg);

    --button-transition: border-color 1s ease-out;

    /* -------------------- Radio & Checkbox 選取框樣式 -------------------- */
    --radio-circle: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
    --checkbox-check: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    --checkbox-background-color: var(--color-text-primary);
    --checkbox-background-color-hover: var(--color-accent);
    --checkbox-background-color-focus: var(--color-text-primary);
    --checkbox-background-color-selected: var(--color-accent);
    --checkbox-border-width: var(--border-width-md);
    --checkbox-border-color: var(--border-color-primary);
    --checkbox-border-color-hover: var(--border-color-primary);
    --checkbox-border-color-focus: var(--border-color-primary);
    --checkbox-border-color-selected: var(--border-color-primary);
    --checkbox-border-radius: var(--radius-sm);
    --checkbox-shadow: var(--shadow-inset);

    --checkbox-label-padding: var(--padding-md);
    --checkbox-label-text-weight: var(--text-weight-rg);
    --checkbox-label-text-size: var(--text-sm);
    --checkbox-label-text-color: var(--color-text-primary);
    --checkbox-label-text-color-selected: var(--checkbox-label-text-color);
    --checkbox-label-background-fill: var(--background-fill-accent);
    --checkbox-label-background-fill-hover: var(--checkbox-label-background-fill);
    --checkbox-label-background-fill-selected: var(--checkbox-label-background-fill);
    --checkbox-label-border-width: var(--border-width-md);
    --checkbox-label-border-color: var(--border-color-primary);
    --checkbox-label-border-color-hover: var(--checkbox-label-border-color);
    --checkbox-label-shadow: var(--shadow-none);
    --checkbox-label-gap: var(--layout-gap);

    /* -------------------- Slider 滑桿樣式 -------------------- */
    --slider-color: var(--color-accent);

    /* -------------------- Input 輸入框樣式 -------------------- */
    --input-padding: var(--padding-md);
    --input-text-weight: var(--text-weight-md);
    --input-text-size: var(--text-sm);
    --input-placeholder-color: var(--color-text-secondary);
    --input-background-fill: var(--background-fill-accent-soft);
    --input-background-fill-hover: var(--background-fill-accent-soft);
    --input-background-fill-focus: var(--background-fill-accent-soft);
    --input-border-width: var(--border-width-md);
    --input-border-color: var(--border-color-primary);
    --input-border-color-hover: var(--border-color-secondary);
    --input-border-color-focus: var(--border-color-secondary);
    --input-radius: var(--embed-radius);
    --input-shadow: var(--shadow-inset);
    --input-shadow-focus: var(--shadow-inset);

    /* -------------------- Table 表格樣式 -------------------- */
    --table-even-background-fill: var(--neutral-950);
    --table-odd-background-fill: var(--neutral-900);
    --table-border-color: var(--border-color-primary);
    --table-row-focus: var(--border-color-secondary);
    --table-radius: var(--embed-radius);
    --form-gap-width: var(--layout-gap);

    /* -------------------- Loader 讀取圖示樣式 -------------------- */
    --loader-color: var(--color-accent);

    /* -------------------- error 錯誤資訊樣式 -------------------- */
    --error-text-color: hsl(340, 50%, 60%);
    --error-background-fill: var(--background-fill-primary);
    --error-border-width: var(--block-border-width);
    --error-border-color: hsl(340, 50%, 60%);

    /* -------------------- ? 未確定樣式 -------------------- */
    --block-info-text-weight: var(--text-weight-rg);
    --block-info-text-size: var(--text-sm);
    --block-info-text-color: var(--color-text-primary);
}

/* -------------------- General 全網頁 -------------------- */
* {
    -webkit-font-smoothing: antialiased
}

html {
    font-size: var(--text-sm);
}

.hidden {
    display: none;
}

.inactive {
    opacity: 0.5;
}

.app.app.app {
    max-width: 100%;
    padding: var(--padding-xl);
}

button.gradio-button {
    min-height: 4rem;
}

div.gradio-checkbox.gradio-checkbox {
    display: flex;
    align-items: center;
}

div.gradio-html.min {
    min-height: 0;
}

.gradio-container .prose,
.gradio-container .prose p {
    font-weight: var(--prose-text-weight);
    font-size: var(--prose-text-size);
    color: var(--color-text-secondary);
}

.gradio-container .prose a,
.gradio-container .prose a:visited {
    text-decoration: none;
}

.gradio-container [type=checkbox],
.gradio-container [type=radio] {
    width: var(--text-lg);
    height: var(--text-lg);
}

textarea[style*="42px"] {
    height: unset !important;
}

#txt2img_prompt textarea,
#img2img_prompt textarea,
#txt2img_neg_prompt textarea,
#img2img_neg_prompt textarea {
    font-family: var(--font-mono);
}

.performance p {
    font-weight: var(--prose-header-text-weight) !important;
    font-size: var(--prose-text-size) !important;
    color: var(--color-text-secondary) !important;
    display: inline-block
}

/* -------------------- Fix Border Type 統一全元素框線 -------------------- */
div.gradio-dropdown.gradio-dropdown,
div.gradio-slider.gradio-slider,
div.gradio-checkbox.gradio-checkbox,
div.gradio-textbox.gradio-textbox,
div.gradio-number.gradio-number,
div.gradio-accordion.gradio-accordion,
fieldset.gradio-radio.gradio-radio,
fieldset.gradio-checkboxgroup.gradio-checkboxgroup {
    padding: var(--padding-lg) !important;
    border-width: var(--border-width-md) !important;
    border-style: var(--border-style-primary) !important;
    border-color: var(--border-color-primary) !important;
    border-radius: var(--embed-radius) !important;
}

div.gradio-image.gradio-image,
div.gradio-file.gradio-file,
div.gradio-gallery.gradio-gallery,
#download_files_txt2img,
#download_files_img2img,
#html_info_txt2img[class*="block"],
#html_info_img2img[class*="block"],
#html_log_txt2img[class*="block"],
#html_log_img2img[class*="block"],
#html_info_x_extras[class*="block"],
#html_info_extras[class*="block"],
#tab_pnginfo div[id^="component-"].block:not(:first-child) {
    padding: var(--padding-lg) !important;
    background: var(--background-fill-accent);
    border-width: var(--border-width-md) !important;
    border-style: var(--border-style-secondary) !important;
    border-color: var(--border-color-primary) !important;
    border-radius: var(--embed-radius) !important;
}

/* -------------------- Fix Image Size 修正圖片大小 -------------------- */
#img2img_image .fixed-height.svelte-rlgzoo,
#img2img_sketch .fixed-height.svelte-rlgzoo,
#img2maskimg .fixed-height.svelte-rlgzoo,
#inpaint_sketch .fixed-height.svelte-rlgzoo {
    height: 100% !important;
}

/* -------------------- Fix Padding 修正內縮 -------------------- */
div.panel,
div.compact,
div.grid-wrap.svelte-1tkea93.svelte-1tkea93 {
    padding: var(--padding-sm) !important;
}

/* -------------------- Fix Margin 修正間距 -------------------- */
#script_list,
#axis_options,
#swap_axes,
#script_txt2txt_prompts_from_file_or_textbox_file,
#script_img2img_prompts_from_file_or_textbox_file,
#html_log_txt2img[class*="block"],
#html_log_img2img[class*="block"],
#txt2img_script_container>div.gradio-group:not(:first-child),
#img2img_script_container>div.gradio-group:not(:first-child) {
    margin-top: var(--padding-md) !important;
}

/* -------------------- Gradio-Button 一般按鈕 -------------------- */
button.gradio-button.gradio-button,
button.custom-button {
    min-width: 6rem;
}

button.gradio-button.tool.tool {
    min-width: 4rem;
    max-width: 6rem;
}

button.gradio-button.gradio-button,
button.gradio-uploadbutton.gradio-uploadbutton,
button.custom-button {
    font-weight: var(--button-small-text-weight);
    font-size: var(--button-small-text-size);
    color: var(--button-secondary-text-color);
    background: var(--button-secondary-background-fill);
    border-width: var(--button-border-width);
    border-style: var(--border-style-primary);
    border-color: var(--button-border-color);
    border-radius: var(--button-small-radius);
    box-shadow: var(--button-shadow);
    transition: var(--button-transition);
}

button.gradio-button.gradio-button:hover,
button.gradio-uploadbutton.gradio-uploadbutton:hover,
button.custom-button:hover {
    color: var(--button-secondary-text-color-hover);
    background: var(--button-secondary-background-fill-hover);
    border-color: var(--button-border-color-hover);
    box-shadow: var(--button-shadow-hover);
}

button.gradio-button.gradio-button:active,
button.gradio-uploadbutton.gradio-uploadbutton:active,
button.custom-button:active {
    box-shadow: var(--button-shadow-active);
}

/* -------------------- Gradio-Button Generate 生成按鈕 -------------------- */
.generate-box {
    position: relative;
}

button.gradio-button.primary {
    font-weight: var(--button-large-text-weight);
    font-size: var(--button-large-text-size);
    color: var(--button-primary-text-color);
    background: var(--button-primary-background-fill);
    border-width: var(--button-border-width);
    border-style: var(--border-style-primary);
    border-color: var(--button-border-color);
    border-radius: var(--button-large-radius);
    box-shadow: var(--button-shadow);
    transition: var(--button-transition);
}

button.gradio-button.generate-box-interrupt,
button.gradio-button.generate-box-skip {
    display: none;
    position: absolute;
    width: 50%;
    height: 100%;
    font-weight: var(--button-large-text-weight);
    font-size: var(--button-large-text-size);
    color: var(--button-primary-text-color);
    background: var(--button-primary-background-fill);
    border-color: var(--button-border-color);
    box-shadow: var(--button-shadow);
    transition: var(--button-transition);
}

button.gradio-button.generate-box-interrupt {
    left: 0;
    border-radius: var(--embed-radius) 0 0 var(--embed-radius);
}

button.gradio-button.generate-box-skip {
    right: 0;
    border-radius: 0 var(--embed-radius) var(--embed-radius) 0;
}

button.gradio-button.primary:hover,
button.gradio-button.generate-box-interrupt:hover,
button.gradio-button.generate-box-skip:hover {
    color: var(--button-primary-text-color-hover);
    background: var(--button-primary-background-fill-hover);
    border-color: var(--button-border-color-hover);
    box-shadow: var(--button-shadow-hover);
}

button.gradio-button.primary:active,
button.gradio-button.generate-box-interrupt:active,
button.gradio-button.generate-box-skip:active {
    box-shadow: var(--button-shadow-active);
}

/* -------------------- Gradio-Dropdown 下拉選單樣式 -------------------- */
div.form {
    background: transparent;
    border-width: 0;
    box-shadow: var(--shadow-none);
    overflow: visible;
    gap: var(--layout-gap);
}

.gradio-dropdown ul.options {
    padding: var(--padding-md);
    min-width: fit-content;
    max-width: inherit;
    white-space: nowrap;
    z-index: 3000;
}

.gradio-dropdown ul.options li.item {
    padding: var(--padding-md);
    font-weight: var(--text-weight-rg);
    font-size: var(--text-sm);
}

.gradio-dropdown ul.options li.item:hover {
    background-color: var(--color-accent);
    border-radius: var(--embed-radius);
}

.gradio-dropdown ul.options li.item:not(:has(.hide)),
.dark .gradio-dropdown ul.options li.item:not(:has(.hide)) {
    background-color: var(--color-text-secondary);
    border-radius: var(--embed-radius);
}

.gradio-dropdown div.wrap.wrap.wrap.wrap {
    box-shadow: var(--shadow-drop);
}

.gradio-dropdown:not(.multiselect) .wrap-inner.wrap-inner.wrap-inner {
    flex-wrap: nowrap;
    gap: 0;
}

.gradio-dropdown .single-select {
    white-space: nowrap;
    overflow: hidden;
}

.gradio-dropdown.multiselect .token-remove.remove-all.remove-all {
    display: flex;
}

.gradio-dropdown .single-select.svelte-a6vu2r.svelte-a6vu2r.svelte-a6vu2r {
    margin: 0;
}

.gradio-dropdown input.svelte-a6vu2r.svelte-a6vu2r.svelte-a6vu2r {
    margin: 0;
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: auto;
}

.gradio-dropdown .remove-all.remove-all.remove-all {
    margin-left: 0;
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: 2rem;
}

.gradio-dropdown .dropdown-arrow {
    margin-right: 0;
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: 2rem;
}

/* -------------------- Slider 數字框修正樣式 -------------------- */
.gradio-slider input[type="number"] {
    width: 8rem;
    font-weight: var(--text-weight-md);
    font-size: var(--text-sm);
}

/* -------------------- Tab Button 標籤頁樣式 -------------------- */
div.tabs button.svelte-1g805jl {
    padding: var(--padding-xl);
}

/* -------------------- Footer 區塊修正樣式 -------------------- */
footer {
    display: none !important;
}

#footer {
    line-height: 2.4rem;
    text-align: center;
}

#footer div {
    display: inline-block;
}

#footer .versions {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
    opacity: 0.85;
}

/* -------------------- Quick Settings 快速設定樣式 -------------------- */
#quicksettings>div {
    min-width: unset !important;
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 30rem;
}

#quicksettings>button {
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 6rem;
}

/* -------------------- txt2img 文生圖區塊 -------------------- */
/* -------------------- Token-Counter 提示詞計數器樣式 -------------------- */
#txt2img_prompt_container,
#img2img_prompt_container {
    min-width: unset !important;
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 50rem;
}

#txt2img_actions_column,
#img2img_actions_column {
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 32rem;
}

.interrogate-col {
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1 !important;
    flex-basis: 10rem !important;
}

.interrogate-col>button {
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: auto;
}

.block.token-counter.token-counter {
    position: absolute;
    top: 0rem;
    right: 2rem;
    width: auto;
    min-width: 3rem;
    z-index: 100;
}

.block.token-counter span {
    padding: 0.2rem 0.6rem;
    font-weight: var(--text-weight-md);
    font-size: var(--text-sm);
    background: var(--background-fill-accent);
    border-width: var(--border-width-lg);
    border-style: var(--border-style-primary);
    border-color: hsla(212, 16%, 80%, 0.4);
    border-radius: var(--embed-radius);
    box-shadow: var(--shadow-inset);
}

.block.token-counter.error span {
    border-width: var(--border-width-lg);
    border-style: var(--border-style-primary);
    border-color: hsla(0, 80%, 60%, 0.4);
    box-shadow: var(--shadow-inset);
}

/* -------------------- Generate 生成按鈕動態大小樣式 -------------------- */
#txt2img_generate_box,
#img2img_generate_box {
    flex-grow: 1;
    flex-shrink: 0;
    flex-basis: auto;
}

#txt2img_tools,
#img2img_tools {
    flex-grow: 0;
    flex-shrink: 1;
    flex-basis: auto;
}

#txt2img_styles_row,
#img2img_styles_row {
    flex-grow: 0;
    flex-shrink: 1;
    flex-basis: auto;
}

#txt2img_tools button,
#img2img_tools button {
    flex-grow: 1 !important;
    flex-shrink: 1 !important;
    flex-basis: 4rem !important;
}

#txt2img_styles,
#img2img_styles {
    flex-grow: 1 !important;
    flex-shrink: 0 !important;
    flex-basis: 20rem !important;
}

#txt2img_styles_row button,
#img2img_styles_row button {
    flex-grow: 0 !important;
    flex-shrink: 1 !important;
    flex-basis: 6rem !important;
}

/* -------------------- Extra Networks UI 修正樣式 -------------------- */
/* -------------------- Tab Nav 修正樣式 -------------------- */
.extra-networks div.tab-nav {
    flex-wrap: nowrap;
    gap: var(--layout-gap);
}

.extra-networks div.tab-nav button.svelte-1g805jl {
    display: flex;
    line-height: 2.8rem;
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: auto;
}

/* -------------------- Search 搜尋框修正樣式 -------------------- */
.extra-networks div.tab-nav textarea.search {
    display: flex;
    margin-bottom: var(--padding-md);
    padding: var(--padding-md);
    font-size: var(--text-sm);
    line-height: 2.8rem;
    align-self: center;
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: auto;
}

/* -------------------- Refresh 重新整理按鈕修正樣式 -------------------- */
#txt2img_extra_refresh {
    min-width: 6.8rem;
    max-width: fit-content;
    display: flex;
    margin-bottom: var(--padding-md);
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: 6.8rem;
}

/* -------------------- Extra Network (Thumbs) 修正樣式 -------------------- */
.extra-network-thumbs {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: var(--layout-gap);
}

.extra-network-thumbs .card {
    position: relative;
    background-image: url('./file=html/card-no-preview.png');
    background-size: cover;
    background-position: center center;
    border-radius: var(--embed-radius);
    cursor: pointer;
}

.extra-network-thumbs .card:hover .additional a {
    display: inline-block;
}

.extra-network-thumbs .actions .additional a {
    display: none;
    position: absolute;
    top: var(--padding-md);
    left: var(--padding-md);
    width: 2.4rem;
    height: 2.4rem;
    font-size: 0;
    background-image: url('./file=html/image-update.svg');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
}

.extra-network-thumbs .actions .name {
    position: absolute;
    bottom: 0;
    padding: var(--padding-lg);
    width: 100%;
    font-weight: var(--text-weight-bd);
    font-size: var(--text-xs);
    color: var(--color-text-primary);
    background: hsla(0, 0%, 0%, 0.5);
    border-radius: 0 0 var(--embed-radius) var(--embed-radius);
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.extra-network-thumbs .card:hover .actions .name {
    white-space: normal;
    word-break: break-all;
}

/* -------------------- Extra Network (Card) 修正樣式 -------------------- */
.extra-network-cards {
    height: 7.25rem;
    overflow: scroll;
    resize: vertical;
}

.extra-network-cards .card {
    display: inline-block;
    position: relative;
    background-image: url('./file=html/card-no-preview.png');
    background-size: auto 100%;
    background-position: center;
    border-radius: var(--embed-radius);
    box-shadow: var(--shadow-drop);
    overflow: hidden;
    cursor: pointer;
}

.extra-network-cards .card:hover {
    box-shadow: var(--shadow-inset);
}

.extra-network-cards .card .actions .additional {
    display: none;
}

.extra-network-cards .card .actions {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    padding: var(--padding-md);
    background: hsla(0, 0%, 0%, 0.5);
    box-shadow: var(--shadow-drop);
    text-shadow: var(--shadow-drop);
}

.extra-network-cards .card .actions * {
    color: var(--color-text-primary);
}

.extra-network-cards .card .actions:hover {
    box-shadow: var(--shadow-inset);
}

.extra-network-cards .card .actions .name {
    font-weight: var(--text-weight-bd);
    font-size: var(--text-sm);
    line-break: anywhere;
}

.extra-network-cards .card .actions .description {
    display: block;
    max-height: 2rem;
    line-height: 1.1;
    white-space: pre-wrap;
}

.extra-network-cards .card .actions .description:hover {
    max-height: none;
}

.extra-network-cards .card .actions:hover .additional {
    display: block;
}

.extra-network-cards .card ul {
    padding: var(--padding-md);
    font-weight: var(--text-weight-bd);
    cursor: unset;
}

.extra-network-cards .card ul a {
    cursor: pointer;
}

.extra-network-cards .card ul a:hover {
    color: var(--color-accent);
}

/* -------------------- Extra Network (No Card) 修正樣式 -------------------- */
.extra-network-cards .nocards,
.extra-network-thumbs .nocards {
    padding: var(--padding-md);
}

.extra-network-cards .nocards h1,
.extra-network-thumbs .nocards h1 {
    font-size: var(--text-lg);
    color: var(--color-text-primary);
}

.extra-network-cards .nocards li,
.extra-network-thumbs .nocards li {
    font-size: var(--text-sm);
    color: var(--color-text-secondary);
}

/* -------------------- Extra Network Metadata 修正樣式 -------------------- */
.extra-network-cards .card .metadata-button:before,
.extra-network-thumbs .card .metadata-button:before {
    content: "🛈";
}

.extra-network-cards .card .metadata-button,
.extra-network-thumbs .card .metadata-button {
    display: none;
    position: absolute;
    top: var(--padding-sm);
    right: var(--padding-md);
    width: 2.4rem;
    font-weight: var(--text-weight-rg);
    font-size: 2.4rem;
    color: var(--color-text-primary);
    text-shadow: var(--shadow-drop);
}

.extra-network-cards .card:hover .metadata-button,
.extra-network-thumbs .card:hover .metadata-button {
    display: inline-block;
}

.extra-network-cards .card .metadata-button:hover,
.extra-network-thumbs .card .metadata-button:hover {
    color: var(--color-accent);
}

/* -------------------- Extra Network Metadata Fullscreen 全螢幕修正樣式 -------------------- */
.popup-metadata {
    display: inline-block;
    padding: var(--padding-md);
    font-size: var(--text-md);
    color: var(--color-text-primary);
    background: var(--background-fill-primary);
    white-space: pre-wrap;
}

.global-popup {
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: hsla(0, 0%, 8%, 0.95);
    overflow: auto;
    z-index: 1001;
}

.global-popup-inner {
    display: inline-block;
    margin: auto;
    padding: var(--padding-md);
}

.global-popup-close:before {
    content: "×";
}

.global-popup-close {
    position: fixed;
    right: 4rem;
    top: 1rem;
    font-size: 2.4rem;
    color: var(--color-text-primary);
    cursor: pointer;
}

/* -------------------- Dimensions & Batch 區塊修正樣式 -------------------- */
#txt2img_settings,
#img2img_settings {
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 60rem;
}

#txt2img_results,
#img2img_results {
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 80rem;
}

#txt2img_column_size,
#img2img_column_size {
    min-width: unset !important;
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 20rem;
}

#txt2img_dimensions_row,
#img2img_dimensions_row {
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 6rem;
}

#txt2img_column_batch,
#img2img_column_batch {
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 19rem;
}

#txt2img_dimensions_row>div,
#img2img_dimensions_row>div {
    width: 100%;
    height: 100%;
}

#txt2img_res_switch_btn,
#img2img_res_switch_btn {
    width: 100%;
    height: 100%;
}

#image_buttons_txt2img>button.gradio-button,
#image_buttons_img2img>button.gradio-button {
    min-width: 12rem !important;
    max-width: 40rem !important;
    flex-grow: 1 !important;
    flex-shrink: 1;
    flex-basis: 12rem;
}

#txt2img_seed,
#img2img_seed {
    flex-grow: 1 !important;
    flex-shrink: 0;
}

#txt2img_steps,
#img2img_steps {
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 19rem;
}

#txt2img_sampling,
#img2img_sampling {
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 20rem;
}

#txt2img_random_seed,
#img2img_random_seed {
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 6rem;
}

#txt2img_reuse_seed,
#img2img_reuse_seed {
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 6rem;
}

#txt2img_subseed_show,
#img2img_subseed_show {
    flex-grow: 0 !important;
    flex-shrink: 1 !important;
    flex-basis: 7.5rem !important;
}

.checkboxes-row>div,
#txt2img_seed_row div.gradio-checkbox,
#img2img_seed_row div.gradio-checkbox {
    flex: 0;
    white-space: nowrap;
    min-width: auto;
}

/* -------------------- Hires. Fix 文字提示修正樣式 -------------------- */
#txtimg_hr_finalres {
    line-height: 3.8rem !important;
}

#txtimg_hr_finalres .resolution {
    font-weight: var(--text-weight-bd);
}

/* -------------------- Script 腳本樣式 -------------------- */
#script_txt2txt_xyz_plot_x_type,
#script_txt2txt_xyz_plot_y_type,
#script_txt2txt_xyz_plot_z_type,
#script_img2img_xyz_plot_x_type,
#script_img2img_xyz_plot_y_type,
#script_img2img_xyz_plot_z_type {
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 15rem;
}

#script_txt2txt_xyz_plot_x_values,
#script_txt2txt_xyz_plot_y_values,
#script_txt2txt_xyz_plot_z_values,
#script_img2img_xyz_plot_x_values,
#script_img2img_xyz_plot_y_values,
#script_img2img_xyz_plot_z_values {
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 25rem;
}

/* -------------------- Live Preview 及時預覽區塊修正樣式 -------------------- */
/* -------------------- Progress 進度條修正樣式 -------------------- */
.progressDiv,
.dark .progressDiv {
    position: relative;
    margin: 0;
    height: 2.4rem;
    background: var(--background-fill-accent-soft);
    border-radius: var(--embed-radius);
}

.progressDiv .progress {
    padding: 0 var(--padding-md);
    width: 0%;
    height: 2.4rem;
    font-weight: var(--text-weight-md);
    font-size: var(--text-sm);
    color: var(--color-text-primary);
    background: var(--background-gradient-primary);
    line-height: 2.4rem;
    text-align: right;
    border-radius: var(--embed-radius);
    overflow: visible;
    white-space: nowrap;
}

/* -------------------- Live Preview 預覽框修正樣式 -------------------- */
.livePreview.livePreview,
.dark .livePreview.livePreview {
    position: absolute;
    margin: 0;
    background-color: var(--background-fill-transparent);
    border-width: var(--border-width-sm);
    border-style: var(--border-style-secondary);
    border-color: var(--border-color-primary);
    border-radius: var(--embed-radius) !important;
    z-index: 300;
}

.livePreview img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.thumbnail-item.svelte-1tkea93.svelte-1tkea93:hover {
    --ring-color: unset;
}

.preview.svelte-g4rw9.svelte-g4rw9 {
    padding: var(--padding-sm);
    background-color: var(--background-fill-transparent);
    border-radius: var(--embed-radius);
}

.grid-wrap.svelte-g4rw9.svelte-g4rw9 {
    padding: 0.2rem;
}

/* -------------------- Fullpage Image Viewer 全視窗影像瀏覽修正樣式 -------------------- */
#lightboxModal {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: hsla(0, 0%, 0%, 0.6);
    flex-direction: column;
    overflow: auto;
    z-index: 1001;
    user-select: none;
    -webkit-user-select: none;
}

#lightboxModal>img {
    display: block;
    margin: auto;
    width: auto;
}

#lightboxModal>img.modalImageFullscreen {
    object-fit: contain;
    height: 100%;
}

#imageARPreview {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    border-width: var(--border-width-lg);
    border-style: var(--border-style-primary);
    border-color: hsla(0, 80%, 60%, 0.4);
    background: hsla(0, 80%, 60%, 0.8);
    pointer-events: none;
    z-index: 900;
}

/* -------------------- Controls 控制器修正樣式 -------------------- */
.modalControls {
    display: flex;
    padding: var(--padding-md);
    background-color: hsla(0, 0%, 0%, 0.5);
    gap: var(--layout-gap);
}

.modalControls span {
    width: 2.4rem;
    font-weight: var(--text-weight-md);
    font-size: 2.4rem;
    color: var(--color-text-primary);
    cursor: pointer;
}

.modalControls span:hover,
.modalControls span:focus {
    color: var(--color-accent);
    text-decoration: none;
}

.modalClose {
    margin-left: auto;
}

.modalPrev,
.modalNext {
    position: absolute;
    top: 50%;
    margin-top: -5rem;
    padding: var(--padding-xl);
    width: auto;
    font-weight: var(--text-weight-md);
    font-size: 2.4rem;
    color: var(--color-text-primary);
    border-radius: 0 var(--embed-radius) var(--embed-radius) 0;
    transition: 0.6s ease;
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
}

.modalNext {
    right: 0;
    border-radius: var(--embed-radius) 0 0 var(--embed-radius);
}

.modalPrev:hover,
.modalNext:hover {
    background-color: hsla(0, 0%, 0%, 0.8);
}

/* -------------------- img2img 區塊修正樣式 -------------------- */
#img2img_label_copy_to_img2img,
#img2img_label_copy_to_sketch,
#img2img_label_copy_to_inpaint,
#img2img_label_copy_to_inpaint_sketch {
    display: flex;
    min-width: unset !important;
    flex-grow: 0 !important;
    flex-shrink: 1;
    flex-basis: 10rem;
}

#img2img_copy_to_img2img>button.gradio-button,
#img2img_copy_to_sketch>button.gradio-button,
#img2img_copy_to_inpaint>button.gradio-button,
#img2img_copy_to_inpaint_sketch>button.gradio-button {
    flex-grow: 1 !important;
    flex-shrink: 0;
    flex-basis: 11rem;
}

#img2img_sketch,
#img2maskimg,
#inpaint_sketch {
    resize: auto;
    background: var(--panel-background-fill);
    overflow: overlay !important;
    z-index: 5;
}

#img2img_scale_resolution_preview.block {
    display: flex;
    align-items: end;
}

#img2img_column_batch {
    align-self: end;
}

#img2img_unused_scale_by_slider {
    visibility: hidden;
    width: 0.6rem;
    max-width: 0.6rem;
    min-width: 0.6rem;
}

/* -------------------- Extra 區塊修正樣式 -------------------- */
#extras_scale_to_tab div.form{
    flex-direction: row;
}

#extras_scale_to_tab div.gradio-row{
    flex-wrap: nowrap;
}

/* -------------------- Extensions 區塊修正樣式 -------------------- */
#settings {
    display: block;
}

#settings>div {
    margin-left: 20rem;
    border: none;

}

#settings>div.tab-nav {
    display: block;
    margin-left: 0;
    width: 20rem;
    float: left;
}

#settings>div.tab-nav button {
    display: block;
    border: none;
    text-align: left;
    white-space: initial;
}

#settings_result {
    margin-left: 1rem;
}

/* -------------------- Extensions 區塊修正樣式 -------------------- */
#tab_extensions table {
    border-collapse: collapse;
}

#tab_extensions table td,
#tab_extensions table th {
    padding: var(--padding-md);
    border-width: var(--border-width-md);
    border-style: var(--border-style-primary);
    border-color: var(--border-color-primary);
}

#tab_extensions table input[type="checkbox"] {
    margin-right: var(--padding-md);
    appearance: checkbox;
}

#tab_extensions button {
    min-width: 8rem;
    max-width: 20rem;
}

#tab_extensions input[disabled="disabled"] {
    opacity: 0.5;
}

.extension-tag {
    font-weight: var(--text-weight-bd);
    font-size: var(--text-sm);
    color: var(--color-text-secondary) !important;
}

#available_extensions .date_added {
    font-weight: var(--text-weight-bd);
    font-size: var(--text-sm);
    color: var(--color-text-secondary) !important;
    opacity: 0.85;
}

/* -------------------- Addition Networks 區塊修正樣式 -------------------- */
#tab_additional_networks div.svelte-15lo0d8>button.gradio-button {
    min-width: 4rem !important;
    max-width: 24rem !important;
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: 0%;
}

